---
- hosts: localhost
  connection: local

  vars:
    roles:
      test:
    win_ansible_vars:
      ansible_user: "{{ win_ansible_username }}"
      ansible_password: "{{ win_ansible_password }}"
      ansible_connection: winrm
      ansible_winrm_transport: "{{ win_ansible_winrm_transport | default('basic') }}"
      ansible_winrm_server_cert_validation: ignore

  tasks:

  - name: Include variables from ~/.developer/dev-bootstrap/vars
    include_vars:
      dir: "{{ ansible_user_dir }}/.developer/dev-bootstrap/vars"
      ignore_unknown_extensions: true

  - name: Include all roles from inventory variables
    include_role:
      name: "{{ item.key }}"
    loop: "{{ roles | dict2items }}"
    when: roles

